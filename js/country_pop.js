Plotly.d3.csv("https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv", function(err, rows){

  function unpack(rows, key) {
  return rows.map(function(row) { return row[key]; });
}

  
var USA = {
  type: "scatter",
  mode: "lines",
  x: [1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],
  y: [22.87252767, 12.71218111, 23.91196615, 21.42474007, 21.740811  ,
       18.56711561, 16.9104185 , 19.01859143, 19.33626108, 17.78718176,
       24.45249004, 16.04597684, 28.18328692, 20.55427224, 28.50759168,
       19.8883018 , 15.71422054, 18.99699004, 17.70590219, 15.09081428,
       13.7651692 , 14.99959864, 19.11242469, 20.52963162, 23.2439926 ,
       15.76407152, 17.32916378, 20.40062401, 20.72313913, 21.44280023,
       24.36572065, 23.3475055 , 27.89041392, 33.33995991, 35.39228987,
       40.82734885, 40.99167131],
  line: {color: '#17BECF'}
}

var France = {
  type: "scatter",
  mode: "lines",
  x: [1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],
  y: [ 16.245779  ,  21.189028  , 101.74155   ,   7.222985  ,
        13.63676167,  17.5121828 ,   1.410387  ,  31.5259855 ,
        14.946668  ,  20.135317  ,  14.52930933,  30.54227767,
        18.351686  ,   8.90077314,  14.6091073 ,  22.73583055,
        14.53306433,  18.9873874 ,  26.736536  ,  11.38403544,
         8.65055   ,  22.7622199 ,  22.40992622,  30.78991933,
        42.22930579,  19.84550575,  16.83805975],
  line: {color: '#7F7F7F'}
}

var Canada = {
  type: "scatter",
  mode: "lines",
  x: [1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],
  y: [ 0.679351  ,  9.7331275 ,  5.643023  , 10.334655  ,  2.226412  ,
        0.319792  ,  8.190888  ,  4.541908  ,  5.97607867, 13.558522  ,
       18.47897683, 13.1283162 , 10.77283811, 19.3687928 , 15.04140733,
        8.4473096 ,  9.15150607, 19.3124948 , 16.99811708, 15.11888513,
        9.672399  , 14.08583009, 16.00152995, 19.8040025 , 19.55157678,
       15.48607711, 15.2978225 , 69.62639779, 37.68528858, 47.7257595 ]
,
  line: {color: '#FF0033'}
}
var Germany = {
  type: "scatter",
  mode: "lines",
  x: [1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],
  y: [16.8856285 , 23.380757  , 47.862016  , 14.188982  ,  6.416281  ,
       24.886672  , 20.10418467, 32.49877112, 17.65168547, 14.8003905 ,
       17.3595341 , 28.0518005 , 16.1260128 , 17.3618822 , 21.93350056,
       26.19701437, 26.03892212, 39.54673117,  8.11205567, 26.0069105 ,
       73.872343  , 45.422694  , 43.873266  , 53.795432  , 29.365851  ],
  line: {color: '#000000'}
}

var UK = {
  type: "scatter",
  mode: "lines",
  x: [1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],
  y: [20.805594  , 13.642169  , 12.86913675, 41.891592  , 14.1176344 ,
       26.3045335 , 15.653076  , 14.480628  , 25.655555  , 45.707835  ,
       25.1698062 ,  8.8393445 , 29.834065  , 28.9479146 , 21.6279964 ,
       18.21893633, 13.3227118 , 12.02924438, 26.27961491, 19.80859927,
       19.718521  , 25.27251417, 17.65315717, 24.75222959, 14.77406847,
       25.62141781, 33.97796761, 21.97733044, 30.67174485, 18.34146862,
       22.99981579, 39.10181769, 83.2449565 , 35.35007438, 47.485003  ]
,
  line: {color: '#CC0099'}
}
var data = [USA, France, Canada, Germany, UK];
    
var layout = {
  title: 'Country average movie pop', 
  xaxis: {
    range: ['1980', '2016'], 
    type: 'date'
  }, 
  yaxis: {
    autorange: true, 
    range: [0, 50], 
    type: 'linear'
  }
};

Plotly.newPlot('myDiv', data, layout, {showSendToCloud: true});
})
